## 1054. 求平均值
本题的基本要求非常简单：给定 N 个实数，计算它们的平均值。但复杂的是有些输入数据可能是非法的。一个“合法”的输入是\[−1000,1000]区间内的实数，并且最多精确到小数点后 2 位。当你计算平均值的时候，不能把那些非法的数据算在内。

**输入格式：**
输入第一行给出正整数 N（≤100）。随后一行给出 N 个实数，数字间以一个空格分隔。

**输出格式：**
对每个非法输入，在一行中输出`ERROR: X is not a legal number`，其中 X 是输入。最后在一行中输出结果：`The average of K numbers is Y`，其中 K 是合法输入的个数，Y 是它们的平均值，精确到小数点后 2 位。如果平均值无法计算，则用`Undefined`替换 Y。如果 K 为 1，则输出`The average of 1 number is Y`。

**输入样例 1：**
>7  
5 -3.2 aaa 9999 2.3.4 7.123 2.35  

**输出样例 1：**
>ERROR: aaa is not a legal number  
ERROR: 9999 is not a legal number  
ERROR: 2.3.4 is not a legal number  
ERROR: 7.123 is not a legal number  
The average of 3 numbers is 1.38  

**输入样例 2：**
>2  
aaa -9999  

**输出样例 2：**
>ERROR: aaa is not a legal number  
ERROR: -9999 is not a legal number  
The average of 0 numbers is Undefined  

---
- 解法存在**致命缺陷**：设置字符数组存储输入的字符串，最长长度是猜的；题目要求，如果是非法输入，要输出该非法输入，**不得不构造字符数组**
- 解题关键：**利用了`int sscanf( string str, string fmt, mixed var1, mixed var2 ... );`和`int sprintf(char *str, char * format [, argument, ...]);`**，与原输入进行比较。
- 只有当合法输入的**个数为1时**，输出内容`The average of 1 number is Y`中，**number才为单数，个数为0还是numbers**


```c
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main() {
	int N, K = 0;	//输入的数量，合法输入的个数
	double sum = 0.0, t;	// 合法输入实数的和，临时存储的实数 
	char num[9], str[50];	// 设置输入字符串的最长长度是猜的！！！ 致命缺陷（测试用例的字符串最长40） 
	scanf("%d", &N);
	for (int i = 0; i < N; i++) {
		scanf("%s", str);	//读取字符串 
		int len = strlen(str);	//获取字符串长度
		int islegal = 1;	//判断是否合法 
		if (len <= 8) {	// 符合要求的实数长度最多为8 -1000.00
			sscanf(str, "%lf", &t);		//将字符串转为浮点数类型 
			sprintf(num, "%.2f", t);	//将浮点数精确到小数点后两位 转为字符串;
			for (int j = 0; j < len; j++) {
				if (num[j] != str[j]) {	//如果处理前后的字符串不一致，就是非法输入 
					islegal = 0;
					break;
				}
			}
		} else {//长度超过8，必非法 
			islegal = 0;
		}
		if (!islegal || t > 1000 || t < -1000) {//如果是非法输入
			printf("ERROR: %s is not a legal number\n", str);
		} else {
			sum += t;
			K++;
		}
	}
	if (K == 0) { //平均值无法计算 即 分母为0 
		printf("The average of 0 numbers is Undefined\n");
	} else if (K == 1) { 
		printf("The average of 1 number is %.2f\n", sum);
	} else { 
		printf("The average of %d numbers is %.2f\n", K, sum / K);
	} 
	return 0;
}
```